### **`ref` —ñ `out` –≤ –º–µ—Ç–æ–¥–∞—Ö: Advanced-—Ä—ñ–≤–µ–Ω—å**

–í C# –∫–ª—é—á–æ–≤—ñ —Å–ª–æ–≤–∞ `ref` —ñ `out` –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è –¥–ª—è –ø–µ—Ä–µ–¥–∞—á—ñ –∞—Ä–≥—É–º–µ–Ω—Ç—ñ–≤ –∑–∞ –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º, –∞–ª–µ –≤–æ–Ω–∏ –º–∞—é—Ç—å —Å—É—Ç—Ç—î–≤—ñ –≤—ñ–¥–º—ñ–Ω–Ω–æ—Å—Ç—ñ —É –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ñ –≤–∏–∫–ª–∏–∫—É —Ç–∞ —Å–ø–æ—Å–æ–±—ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è.

---

## **1. –û—Å–Ω–æ–≤–Ω–∞ —Ä—ñ–∑–Ω–∏—Ü—è –º—ñ–∂ `ref` —Ç–∞ `out`**

|–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞|`ref`|`out`|
|---|---|---|
|–ß–∏ –ø–æ—Ç—Ä—ñ–±–Ω–æ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –∑–º—ñ–Ω–Ω—É –¥–æ –≤–∏–∫–ª–∏–∫—É?|–¢–∞–∫|–ù—ñ|
|–ß–∏ –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø—Ä–∏—Å–≤–æ—é–≤–∞—Ç–∏ –∑–Ω–∞—á–µ–Ω–Ω—è –ø–µ—Ä–µ–¥ –≤–∏—Ö–æ–¥–æ–º —ñ–∑ –º–µ—Ç–æ–¥—É?|–ù—ñ|–¢–∞–∫|
|–í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è|–ü–µ—Ä–µ–¥–∞–≤–∞–Ω–Ω—è –∑–Ω–∞—á–µ–Ω–Ω—è, —è–∫–µ –∑–º—ñ–Ω—é—î—Ç—å—Å—è|–ü–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è –∑–Ω–∞—á–µ–Ω–Ω—è —á–µ—Ä–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä|

---

## **2. –ö–æ–Ω—Ç—Ä–∞–∫—Ç –≤–∏–∫–ª–∏–∫—É**

–ö–æ–Ω—Ç—Ä–∞–∫—Ç –≤–∏–∫–ª–∏–∫—É (`call contract`) –≤–∏–∑–Ω–∞—á–∞—î, —è–∫—ñ –≤–∏–º–æ–≥–∏ –ø–æ–≤–∏–Ω–µ–Ω –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏ –≤–∏–∫–ª–∏–∫ –º–µ—Ç–æ–¥—ñ–≤, —â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å `ref` —ñ `out`.

### **ref: –ö–æ–Ω—Ç—Ä–∞–∫—Ç**

- –ü–µ—Ä–µ–¥ –≤–∏–∫–ª–∏–∫–æ–º –º–µ—Ç–æ–¥—É –∑–º—ñ–Ω–Ω–∞ **–æ–±–æ–≤‚Äô—è–∑–∫–æ–≤–æ** –º–∞—î –±—É—Ç–∏ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–æ–≤–∞–Ω–∞.
- –ú–µ—Ç–æ–¥ –º–æ–∂–µ –∑–º—ñ–Ω—é–≤–∞—Ç–∏ –∑–Ω–∞—á–µ–Ω–Ω—è –∑–º—ñ–Ω–Ω–æ—ó, –∞–ª–µ —Ü–µ **–Ω–µ–æ–±–æ–≤‚Äô—è–∑–∫–æ–≤–æ**.
- –ü–æ—Å–∏–ª–∞–Ω–Ω—è –ø–µ—Ä–µ–¥–∞—î—Ç—å—Å—è –±–µ–∑–ø–æ—Å–µ—Ä–µ–¥–Ω—å–æ, —Ç–æ–º—É –±—É–¥—å-—è–∫—ñ –∑–º—ñ–Ω–∏ –≤ –º–µ—Ç–æ–¥—ñ –≤–ø–ª–∏–≤–∞—é—Ç—å –Ω–∞ –∑–æ–≤–Ω—ñ—à–Ω—é –∑–º—ñ–Ω–Ω—É.

```csharp
void ModifyValue(ref int value)
{
    value += 10;
}

int x = 5;
ModifyValue(ref x);
Console.WriteLine(x); // 15
```

- –Ø–∫—â–æ –∑–º—ñ–Ω–Ω–∞ –ø–µ—Ä–µ–¥–∞—î—Ç—å—Å—è —á–µ—Ä–µ–∑ `ref`, —É —Å—Ç–µ–∫ –ø–µ—Ä–µ–¥–∞—î—Ç—å—Å—è **–ø–æ—Å–∏–ª–∞–Ω–Ω—è** –Ω–∞ –Ω–µ—ó, —Ç–æ–º—É –º–æ–¥–∏—Ñ—ñ–∫–∞—Ü—ñ—è –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –º–µ—Ç–æ–¥—É –≤–ø–ª–∏–≤–∞—î –Ω–∞ –Ω–µ—ó –Ω–∞–ø—Ä—è–º—É.

### **out: –ö–æ–Ω—Ç—Ä–∞–∫—Ç**

- –ó–º—ñ–Ω–Ω—É **–Ω–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ** —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –ø–µ—Ä–µ–¥ –ø–µ—Ä–µ–¥–∞—á–µ—é –≤ –º–µ—Ç–æ–¥.
- –ú–µ—Ç–æ–¥ **–æ–±–æ–≤‚Äô—è–∑–∫–æ–≤–æ** –º–∞—î –ø—Ä–∏—Å–≤–æ—ó—Ç–∏ –∑–Ω–∞—á–µ–Ω–Ω—è –ø–µ—Ä–µ–¥ –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è–º.
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è –¥–æ–¥–∞—Ç–∫–æ–≤–∏—Ö –∑–Ω–∞—á–µ–Ω—å —ñ–∑ –º–µ—Ç–æ–¥—É.

```csharp
void ComputeValues(int input, out int square, out int cube)
{
    square = input * input;
    cube = input * input * input;
}

int sq, cb;
ComputeValues(3, out sq, out cb);
Console.WriteLine($"Square: {sq}, Cube: {cb}"); // Square: 9, Cube: 27
```

> **–ö–æ–Ω—Ç—Ä–∞–∫—Ç `out` –∂–æ—Ä—Å—Ç–∫—ñ—à–∏–π**, –æ—Å–∫—ñ–ª—å–∫–∏ –≤–∏–º–∞–≥–∞—î –æ–±–æ–≤‚Äô—è–∑–∫–æ–≤–æ—ó —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó –≤ –º–µ–∂–∞—Ö –º–µ—Ç–æ–¥—É.

---

## **3. `ref` –¥–ª—è reference types: –û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ**

–î–ª—è **reference types (`class`)** `ref` –ø—Ä–∞—Ü—é—î –Ω–µ —Ç–∞–∫, —è–∫ –¥–ª—è `value types`.

### **–ë–µ–∑ `ref` (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º)**

```csharp
class MyClass
{
    public int Value { get; set; }
}

void ModifyObject(MyClass obj)
{
    obj.Value = 42;  // –ó–º—ñ–Ω—é—î—Ç—å—Å—è —Å—Ç–∞–Ω –æ–±'—î–∫—Ç–∞
    obj = new MyClass { Value = 100 }; // –õ–æ–∫–∞–ª—å–Ω–∞ –∑–º—ñ–Ω–∞
}

MyClass instance = new MyClass { Value = 10 };
ModifyObject(instance);
Console.WriteLine(instance.Value); // 42
```

‚ùó **–í–∞–∂–ª–∏–≤–æ:** —Ö–æ—á–∞ `Value` –∑–º—ñ–Ω–∏–≤—Å—è, —Å–∞–º –æ–±'—î–∫—Ç `instance` –Ω–µ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–∏–≤—Å—è –Ω–∞ –Ω–æ–≤–∏–π –æ–±'—î–∫—Ç `new MyClass(...)`.

---

### **–ó `ref` (–∑–º—ñ–Ω–∞ —Å–∞–º–æ–≥–æ –ø–æ—Å–∏–ª–∞–Ω–Ω—è)**

–Ø–∫—â–æ –ø–µ—Ä–µ–¥–∞—Ç–∏ `ref`, –º–µ—Ç–æ–¥ –º–æ–∂–µ –∑–º—ñ–Ω–∏—Ç–∏ —Å–∞–º—É –∑–º—ñ–Ω–Ω—É, –∞ –Ω–µ –ª–∏—à–µ —ó—ó –≤–º—ñ—Å—Ç:

```csharp
void ModifyObject(ref MyClass obj)
{
    obj.Value = 42;  // –ó–º—ñ–Ω—é—î—Ç—å—Å—è —Å—Ç–∞–Ω –æ–±'—î–∫—Ç–∞
    obj = new MyClass { Value = 100 }; // –¢–µ–ø–µ—Ä –∑–º—ñ–Ω—é—î—Ç—å—Å—è —Å–∞–º–µ –ø–æ—Å–∏–ª–∞–Ω–Ω—è!
}

MyClass instance = new MyClass { Value = 10 };
ModifyObject(ref instance);
Console.WriteLine(instance.Value); // 100 (–æ–±'—î–∫—Ç –∑–∞–º—ñ–Ω–µ–Ω–æ!)
```

üîπ **–í—ñ–¥–º—ñ–Ω–Ω—ñ—Å—Ç—å**: –ø–µ—Ä–µ–¥–∞—á–∞ `ref MyClass` –¥–∞—î –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å **–ø–µ—Ä–µ–ø—Ä–∏–∑–Ω–∞—á–∏—Ç–∏** —Å–∞–º–µ –ø–æ—Å–∏–ª–∞–Ω–Ω—è `instance`, –∞ –Ω–µ –ª–∏—à–µ –∑–º—ñ–Ω–∏—Ç–∏ –π–æ–≥–æ –≤–º—ñ—Å—Ç.

---

## **4. –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è, –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è, —ñ —Ä–∏–∑–∏–∫–∏**

### **–ö–æ–ª–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `ref`?**

- –Ø–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–º—ñ–Ω—é–≤–∞—Ç–∏ –ø–µ—Ä–µ–¥–∞–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è **–±–µ–∑ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –Ω–æ–≤–æ–≥–æ –æ–±'—î–∫—Ç–∞** (`int`, `struct`).
- –Ø–∫—â–æ —Ç—Ä–µ–±–∞ –ø–µ—Ä–µ–¥–∞—Ç–∏ **reference type —ñ –º–∞—Ç–∏ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –∑–º—ñ–Ω—é–≤–∞—Ç–∏ —Å–∞–º–µ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –æ–±'—î–∫—Ç**.
- –î–ª—è **–æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç—ñ** —É –≤–∏–ø–∞–¥–∫—É –≤–µ–ª–∏–∫–∏—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä (—â–æ–± —É–Ω–∏–∫–Ω—É—Ç–∏ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è).

### **–ö–æ–ª–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ `out`?**

- –Ø–∫—â–æ —Ç—Ä–µ–±–∞ –ø–æ–≤–µ—Ä–Ω—É—Ç–∏ **–¥–µ–∫—ñ–ª—å–∫–∞ –∑–Ω–∞—á–µ–Ω—å** —ñ–∑ –º–µ—Ç–æ–¥—É.
- –Ø–∫—â–æ –∑–º—ñ–Ω–Ω–∞ –Ω–µ –º–∞—î –ø–æ—á–∞—Ç–∫–æ–≤–æ–≥–æ –∑–Ω–∞—á–µ–Ω–Ω—è —ñ **–π–æ–≥–æ —Ç—Ä–µ–±–∞ —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –º–µ—Ç–æ–¥—É**.

### **–†–∏–∑–∏–∫–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è**

- `ref` –º–æ–∂–µ —É—Å–∫–ª–∞–¥–Ω–∏—Ç–∏ —á–∏—Ç–∞–±–µ–ª—å–Ω—ñ—Å—Ç—å —ñ **–ø—Ä–∏–∑–≤–µ—Å—Ç–∏ –¥–æ –Ω–µ–æ—á—ñ–∫—É–≤–∞–Ω–æ—ó –º—É—Ç–∞—Ü—ñ—ó –∑–º—ñ–Ω–Ω–∏—Ö**.
- `out` –ø–æ—Ä—É—à—É—î —ñ–¥–µ—é **—á–∏—Å—Ç–∏—Ö —Ñ—É–Ω–∫—Ü—ñ–π**, –∞–¥–∂–µ –≤—ñ–Ω **–≤–∏–º–∞–≥–∞—î –ø–æ–±—ñ—á–Ω–æ–≥–æ –µ—Ñ–µ–∫—Ç—É**.
- `ref` –ø–µ—Ä–µ–¥–∞—á–∞ reference type –º–æ–∂–µ —Å–ø—Ä–∏—á–∏–Ω–∏—Ç–∏ **–Ω–µ–±–∞–∂–∞–Ω—ñ –º—É—Ç–∞—Ü—ñ—ó**, —è–∫—â–æ –∑–º—ñ–Ω—é–≤–∞—Ç–∏ –π–æ–≥–æ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ.

---

## **5. `ref readonly`, `in` —ñ `ref return` (—Ä–æ–∑—à–∏—Ä–µ–Ω–∏–π —Ä—ñ–≤–µ–Ω—å)**

### **`ref readonly`**

–Ø–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç–∏ –∑–Ω–∞—á–µ–Ω–Ω—è —á–µ—Ä–µ–∑ `ref`, –∞–ª–µ **–∑–∞–±–æ—Ä–æ–Ω–∏—Ç–∏ –º–æ–¥–∏—Ñ—ñ–∫–∞—Ü—ñ—é**:

```csharp
void PrintValue(in int value)
{
    Console.WriteLine(value);
    // value += 10; // –ü–æ–º–∏–ª–∫–∞!
}
```

üîπ –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –¥–ª—è –±–µ–∑–ø–µ—á–Ω–æ–≥–æ **–∑–∞—Ö–∏—Å—Ç—É –≤—ñ–¥ –∑–º—ñ–Ω** –ø—Ä–∏ –ø–µ—Ä–µ–¥–∞—á—ñ –∑–∞ –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º.

---

### **`ref return` —Ç–∞ `ref local`**

–ú–µ—Ç–æ–¥–∏ –º–æ–∂—É—Ç—å **–ø–æ–≤–µ—Ä—Ç–∞—Ç–∏ –ø–æ—Å–∏–ª–∞–Ω–Ω—è**:

```csharp
ref int GetArrayElement(ref int[] arr, int index)
{
    return ref arr[index];
}

int[] numbers = { 1, 2, 3 };
ref int refToElement = ref GetArrayElement(ref numbers, 1);
refToElement = 42; // –∑–º—ñ–Ω—é—î –µ–ª–µ–º–µ–Ω—Ç —É –º–∞—Å–∏–≤—ñ
Console.WriteLine(numbers[1]); // 42
```

üîπ **–ö–æ–ª–∏ –∫–æ—Ä–∏—Å–Ω–æ?**

- –ö–æ–ª–∏ –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø—Ä–∞—Ü—é–≤–∞—Ç–∏ –Ω–∞–ø—Ä—è–º—É —ñ–∑ **–∑–º—ñ–Ω–Ω–∏–º –∑–Ω–∞—á–µ–Ω–Ω—è–º —É —Å—Ç—Ä—É–∫—Ç—É—Ä—ñ** (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –≤ –º–∞—Å–∏–≤–∞—Ö, –∫–µ—à–∞—Ö).

---

## **6. –í–∏—Å–Ω–æ–≤–∫–∏**

|–ö—Ä–∏—Ç–µ—Ä—ñ–π|`ref`|`out`|
|---|---|---|
|–ü–µ—Ä–µ–¥–∞—î –∑–Ω–∞—á–µ–Ω–Ω—è –∑–∞ –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º|‚úÖ|‚úÖ|
|–í–∏–º–∞–≥–∞—î —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó –ø–µ—Ä–µ–¥ –≤–∏–∫–ª–∏–∫–æ–º|‚úÖ|‚ùå|
|–í–∏–º–∞–≥–∞—î –ø—Ä–∏—Å–≤–æ—î–Ω–Ω—è –Ω–æ–≤–æ–≥–æ –∑–Ω–∞—á–µ–Ω–Ω—è –≤ –º–µ—Ç–æ–¥—ñ|‚ùå|‚úÖ|
|–î–æ–∑–≤–æ–ª—è—î –∑–º—ñ–Ω—é–≤–∞—Ç–∏ –ø–µ—Ä–µ–¥–∞–Ω–µ –∑–Ω–∞—á–µ–Ω–Ω—è|‚úÖ|‚úÖ|
|–î–æ–∑–≤–æ–ª—è—î –∑–º—ñ–Ω—é–≤–∞—Ç–∏ —Å–∞–º–µ –ø–æ—Å–∏–ª–∞–Ω–Ω—è (reference type)|‚úÖ|‚ùå|

### **–ö–ª—é—á–æ–≤—ñ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó**

‚úÖ –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `ref`, —è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–º—ñ–Ω—é–≤–∞—Ç–∏ –∑–Ω–∞—á–µ–Ω–Ω—è –∞–±–æ –ø–æ—Å–∏–ª–∞–Ω–Ω—è –Ω–∞ –æ–±'—î–∫—Ç.  
‚úÖ –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `out`, —è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø–æ–≤–µ—Ä–Ω—É—Ç–∏ **–∫—ñ–ª—å–∫–∞ –∑–Ω–∞—á–µ–Ω—å** –±–µ–∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è `Tuple`.  
‚úÖ –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `in` –¥–ª—è **–æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó —á–∏—Ç–∞–Ω–Ω—è –∑–Ω–∞—á–µ–Ω—å –±–µ–∑ –∫–æ–ø—ñ—é–≤–∞–Ω–Ω—è**.  
‚úÖ –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ `ref return`, —è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–º—ñ–Ω—é–≤–∞—Ç–∏ –∑–Ω–∞—á–µ–Ω–Ω—è –Ω–∞–ø—Ä—è–º—É —É —Å—Ç—Ä—É–∫—Ç—É—Ä—ñ –¥–∞–Ω–∏—Ö.

‚òë **–ù–µ –∑–ª–æ–≤–∂–∏–≤–∞–π—Ç–µ `ref` —ñ `out`**, –æ—Å–∫—ñ–ª—å–∫–∏ –≤–æ–Ω–∏ –ø–æ—Ä—É—à—É—é—Ç—å —Ñ—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—É —á–∏—Å—Ç–æ—Ç—É –∫–æ–¥—É, —É—Å–∫–ª–∞–¥–Ω—é—é—Ç—å —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Ç–∞ –º–æ–∂—É—Ç—å –ø—Ä–∏–∑–≤–æ–¥–∏—Ç–∏ –¥–æ –Ω–µ–ø–µ—Ä–µ–¥–±–∞—á—É–≤–∞–Ω–∏—Ö –∑–º—ñ–Ω.